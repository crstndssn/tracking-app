<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking App</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>

<body>

    <!-- navigatio no auth -->
    <nav id="navigationPublic" style="display: none;" class="container mx-auto flex justify-between items-center py-8">
        <a href="#/">
            <h1 class="md:text-3xl xs:text-xl font-semibold">Tracking App</h1>
        </a>
        <div class="flex justify-center items-center">
            <a href="#/signup" class="cursor-pointer md:text-base xs:text-sm md:mx-6 xs:mx-3 logged-out" id="btn-signup">Sign Up</a>
            <a href="#/login" class="cursor-pointer md:text-base xs:text-sm  text-white bg-black py-1 px-3 rounded-md logged-out"
                id="btn-login">Log In
            </a>
        </div>
    </nav>

    <!-- navigatio auth -->
    <nav id="navigationPrivate" style="display: none;" class="container mx-auto flex justify-between items-center py-8">
        <a class="md:text-3xl xs:text-xl font-semibold" href="#/">Tracking App</a>
        <div class="flex justify-center items-center">
            <!-- <p class="cursor-pointer text-md mx-6" id="logout">logout</p> -->
            <!-- <p id="getPostBtn" class="cursor-pointer text-md mx-3 text-black bg-transparent">goals</p>
            <p id="getPostBtn" class="cursor-pointer text-md mx-3 text-black bg-transparent">money</p> -->
            <a href="#/tasks" id="addPostBtn"
                class="cursor-pointer"><img src="resources/task.svg" alt="taks" class="w-7"></a>
                <p id="username"></p>
            <img id="userAvatar" class="w-9 ml-5 rounded-full cursor-pointer" alt="user-img" />
        </div>
    </nav>

    <section id="root" class="container mx-auto"></section>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyC32a2Z-CUka2LlX54lfJUVqACSUKggMsE",
            authDomain: "tracking-app-5f09f.firebaseapp.com",
            projectId: "tracking-app-5f09f",
            storageBucket: "tracking-app-5f09f.appspot.com",
            messagingSenderId: "1089548576525",
            appId: "1:1089548576525:web:8703e16f763af4df3e3244"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>

    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-firestore.js"></script>

    <script>
        // navigation auth
        const navigationPublic = document.getElementById('navigationPublic');
        const navigationPrivate = document.getElementById('navigationPrivate');

        const userAvatar = document.getElementById('userAvatar');

        firebase.auth().onAuthStateChanged((user) => {
            if (user) {
                navigationPublic.style.display = 'none'
                navigationPrivate.style.display = 'flex'
                console.log(user.displayName)
                if (user.photoURL) {
                    userAvatar.setAttribute('src', user.photoURL);
                } else {
                    userAvatar.setAttribute('src', 'src/resources/profile-user.png')
                }
            } else {
                navigationPublic.style.display = 'flex'
                navigationPrivate.style.display = 'none'
            }
        })

        userAvatar.addEventListener('click', (e) => {
            firebase.auth().signOut().then(() => {
                window.location.href = '#/';
                location.reload();
            })
        })
    </script>
</body>

</html>